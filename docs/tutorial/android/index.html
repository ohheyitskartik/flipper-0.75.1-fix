<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.68">
<link rel="search" type="application/opensearchdescription+xml" title="Flipper" href="/opensearch.xml">
<script src="https://buttons.github.io/buttons.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
<script src="/js/code-blocks-buttons.js"></script>
<script src="/js/google-analytics.js"></script><title data-react-helmet="true">Building an Android Plugin | Flipper</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Building an Android Plugin | Flipper"><meta data-react-helmet="true" name="description" content="For the purpose of the tutorial, we will assume you already have an existing"><meta data-react-helmet="true" property="og:description" content="For the purpose of the tutorial, we will assume you already have an existing"><meta data-react-helmet="true" property="og:url" content="https://fbflipper.com//docs/tutorial/android"><link data-react-helmet="true" rel="shortcut icon" href="/img/icon.png"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link data-react-helmet="true" rel="canonical" href="https://fbflipper.com//docs/tutorial/android"><link rel="stylesheet" href="/styles.ede05923.css">
<link rel="preload" href="/styles.0cfb5519.js" as="script">
<link rel="preload" href="/runtime~main.07d19881.js" as="script">
<link rel="preload" href="/main.cfff2d1e.js" as="script">
<link rel="preload" href="/1.f499c85c.js" as="script">
<link rel="preload" href="/70.13b53424.js" as="script">
<link rel="preload" href="/73.def975d9.js" as="script">
<link rel="preload" href="/935f2afb.a1e65e9e.js" as="script">
<link rel="preload" href="/69.7041db55.js" as="script">
<link rel="preload" href="/04f828f9.cf5d54bf.js" as="script">
</head>
<body>
<div style="display: none; text-align: center; background-color: white; color: black;" id="internaldocs-banner"></div>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_2AhQ">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img src="/img/icon.png" alt="Flipper Logo" class="themedImage_2E_h themedImage--light_AouX navbar__logo"><img alt="Flipper Logo" class="themedImage_2E_h themedImage--dark_1YPN navbar__logo"><strong class="navbar__title">Flipper</strong></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/features/index">Features</a><a class="navbar__item navbar__link" href="/docs/getting-started/index">Setup</a><a class="navbar__item navbar__link" href="/docs/tutorial/intro">Creating Plugins</a><a href="https://github.com/facebook/flipper" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><a class="navbar__item navbar__link" href="/docs/internals/index">Under the Hood</a><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span><span class="DocSearch-Button-Key">âŒ˜</span><span class="DocSearch-Button-Key">K</span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/icon.png" alt="Flipper Logo" class="themedImage_2E_h themedImage--light_AouX navbar__logo"><img alt="Flipper Logo" class="themedImage_2E_h themedImage--dark_1YPN navbar__logo"><strong class="navbar__title">Flipper</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/features/index">Features</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/getting-started/index">Setup</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/tutorial/intro">Creating Plugins</a></li><li class="menu__list-item"><a href="https://github.com/facebook/flipper" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/internals/index">Under the Hood</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive thin-scrollbar menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Tutorial</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial/intro">Intro</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial/ios">Building an iOS Plugin</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/tutorial/android">Building an Android Plugin</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial/react-native">Building a React Native Plugin</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial/js-setup">Building a Desktop Plugin</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial/js-table">Showing a table</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial/js-custom">Custom Plugin</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial/js-publishing">Publishing</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Development workflow</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/extending/dev-setup">Development Setup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/extending/loading-custom-plugins">Dynamically Loading Plugins</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/extending/desktop-plugin-structure">Plugin structure</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/extending/testing">Testing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/extending/debugging">Debugging</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/extending/plugin-distribution">Plugin Distribution</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Desktop plugin APIs</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/extending/flipper-plugin">Desktop Plugin API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/extending/styling-components">Styling Components</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/extending/create-table-plugin">Create Table Plugin</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/extending/search-and-filter">Searching and Filtering</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Deprecated APIs</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/extending/ui-components">UI Components</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/extending/js-plugin-api">Desktop Plugin API</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Client plugin APIs</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/extending/create-plugin">Client Plugin API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/extending/error-handling">Error Handling</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/extending/arch">Architecture</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/extending/client-plugin-lifecycle">Client Plugin Lifecycle</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/extending/layout-inspector">Extending Layout Inspector</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_39qw"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Building an Android Plugin</h1></header><div class="markdown"><img alt="Android Tutorial App" src="/img/android-tutorial-app.png"><p>For the purpose of the tutorial, we will assume you already have an existing
Android application in which you have a feed or list of items. As the Flipper
team, we obviously concern ourselves mostly with sea mammals, so this is what
our app displays. The actual display logic is not what&#x27;s interesting here,
but how we can make this data available in our Flipper desktop app.</p><p>Part of what makes Flipper so useful is allowing users to inspect the
internals of their app. In this case, we&#x27;d like to see the specific
sea mammal data the app is handling, so let&#x27;s write a plugin to make that
easy.</p><p>You can find the source code of the project <a href="https://github.com/facebook/flipper/tree/7dae5771d96ea76b75796d3b3a2c78746e581e3f/android/tutorial" target="_blank" rel="noopener noreferrer">on GitHub</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="creating-a-plugin"></a>Creating a Plugin<a aria-hidden="true" class="hash-link" href="#creating-a-plugin" title="Direct link to heading">#</a></h2><p>On Android, a Flipper plugin is a class that implements the
<a href="https://github.com/facebook/flipper/blob/master/android/src/main/java/com/facebook/flipper/core/FlipperPlugin.java" target="_blank" rel="noopener noreferrer"><code>FlipperPlugin</code></a>
interface.</p><p>The interface is rather small and only comprises four methods:</p><ul><li><code>getId() -&gt; String</code>: Specify a unique string so the JavaScript side knows where to talk to. This must match the name attribute in the <code>package.json</code> we will look into later in this tutorial.</li><li><code>onConnect(FlipperConnection)</code>: This method is called when the desktop app connects to the mobile client and is ready to receive or send data.</li><li><code>onDisconnect()</code>: We&#x27;re sure you can figure this one out.</li><li><code>runInBackground() -&gt; Boolean</code>: Unless this is true, only the currently selected plugin in the Flipper UI can communicate with the device.</li></ul><p>Let&#x27;s implement these methods for our sealife app:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-kotlin codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">import com.facebook.flipper.core.FlipperConnection</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">import com.facebook.flipper.core.FlipperObject</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">import com.facebook.flipper.core.FlipperPlugin</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">import com.facebook.flipper.sample.tutorial.MarineMammals</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">class SeaMammalFlipperPlugin : FlipperPlugin {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    private var connection: FlipperConnection? = null</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    override fun getId(): String = &quot;sea-mammals&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    override fun onConnect(connection: FlipperConnection?) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        this.connection = connection</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        MarineMammals.list.mapIndexed { index, (title, picture_url) -&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            FlipperObject.Builder()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    .put(&quot;id&quot;, index)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    .put(&quot;title&quot;, title)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    .put(&quot;url&quot;, picture_url).build()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }.forEach(this::newRow)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    override fun onDisconnect() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        connection = null</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    override fun runInBackground(): Boolean = false</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    private fun newRow(row: FlipperObject) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        connection?.send(&quot;newRow&quot;, row)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p><em>See <a href="https://github.com/facebook/flipper/blob/5afb148ffa9e267e5b24e0dfae198d1cf46cc396/android/tutorial/src/main/java/com/facebook/flipper/sample/tutorial/plugin/SeaMammalFlipperPlugin.kt" target="_blank" rel="noopener noreferrer">SeaMammalFlipperPlugin.kt</a></em></p><p>The two interesting bits here are <code>onConnect</code> and <code>newRow</code>. <code>newRow</code> sends a message
to the desktop app and is identified with the same name &quot;newRow&quot;.</p><p>For our sample app, we&#x27;re dealing with a static data source. However, in real
life, you will likely dynamically receive new data as the user interacts with
the app. So while we just send all the data we have at once in <code>onConnect</code>,
you would normally set up a listener here to instead call <code>newRow</code> as new data
arrives.</p><p>You may have noticed that we don&#x27;t just send random <code>Object</code>s over the wire but
use <code>FlipperObject</code>s instead. What are they? A <code>FlipperObject</code> works similar
to a JSON dictionary and has a limited set of supported types like strings,
integers and arrays. Before sending an object from your native app to the
desktop, you first need to break it down into <code>FlipperObject</code>-serializable parts.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="registering-your-plugin"></a>Registering your Plugin<a aria-hidden="true" class="hash-link" href="#registering-your-plugin" title="Direct link to heading">#</a></h2><p>Now all you need to do is let Flipper know about your new plugin. You do this
by calling <code>addPlugin</code> on your <code>FlipperClient</code>, which is normally created
at application startup.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-kotlin codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">val flipperClient = AndroidFlipperClient.getInstance(this)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Add all sorts of other amazing plugins here ...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">flipperClient.addPlugin(SeaMammalFlipperPlugin())</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">flipperClient.start()</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p><em>See <a href="https://github.com/facebook/flipper/blob/5afb148ffa9e267e5b24e0dfae198d1cf46cc396/android/tutorial/src/main/java/com/facebook/flipper/sample/tutorial/TutorialApplication.kt" target="_blank" rel="noopener noreferrer"><code>TutorialApplication.kt</code></a></em></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="what-next"></a>What next<a aria-hidden="true" class="hash-link" href="#what-next" title="Direct link to heading">#</a></h2><p>When starting your application now, Flipper will tell the desktop application
about the plugin it supports, including &quot;sea-mammals&quot; and will look for a
corresponding JavaScript plugin by that name. Let&#x27;s build that next.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/facebook/flipper/blob/master/website/../docs/tutorial/android.mdx" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/tutorial/ios"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Building an iOS Plugin</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/tutorial/react-native"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Building a React Native Plugin Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_ thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#creating-a-plugin" class="table-of-contents__link">Creating a Plugin</a></li><li><a href="#registering-your-plugin" class="table-of-contents__link">Registering your Plugin</a></li><li><a href="#what-next" class="table-of-contents__link">What next</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Learn</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started/index">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/tutorial/intro">Plugin Creation Tutorial</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Plugins</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/features/index">Core Plugins</a></li><li class="footer__item"><a href="https://www.npmjs.com/search?q=keywords:flipper-plugin" target="_blank" rel="noopener noreferrer" class="footer__link-item">Community Plugins</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Legal</h4><ul class="footer__items"><li class="footer__item"><a href="https://opensource.facebook.com/legal/privacy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy</a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/terms/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://twitter.com/flipper_fb" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li><li class="footer__item"><a href="https://github.com/facebook/flipper" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="text--center"><div class="margin-bottom--sm"><img class="footer__logo" alt="Flipper Mascot" src="/img/mascot.png"></div><div>Copyright Â© 2021 Facebook</div></div></div></footer></div>
<script src="/styles.0cfb5519.js"></script>
<script src="/runtime~main.07d19881.js"></script>
<script src="/main.cfff2d1e.js"></script>
<script src="/1.f499c85c.js"></script>
<script src="/70.13b53424.js"></script>
<script src="/73.def975d9.js"></script>
<script src="/935f2afb.a1e65e9e.js"></script>
<script src="/69.7041db55.js"></script>
<script src="/04f828f9.cf5d54bf.js"></script>
</body>
</html>